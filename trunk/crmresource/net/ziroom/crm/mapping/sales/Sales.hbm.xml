<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
	Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
	<class name="net.ziroom.crm.entity.sales.Sales" table="t_sales"
		catalog="ziroomcrm">
		<id name="salesId" type="java.lang.Integer">
			<column name="sales_id" />
			<generator class="native"></generator>
		</id>
		<discriminator column="type" type="string" />
		<component name="salesComponent"
			class="net.ziroom.crm.entity.component.SalesComponent">
			<property name="salesName" type="java.lang.String">
				<column name="sales_name" length="30" />
			</property>
			<property name="createTime" type="java.util.Date">
				<column name="create_time" length="19" />
			</property>
			<property name="salesType" type="java.lang.String">
				<column name="sales_type" length="5" />
			</property>
			<property name="origin" type="java.lang.String">
				<column name="origin" length="5" />
			</property>
			<property name="stage" type="java.lang.String">
				<column name="stage" length="5" />
			</property>
			<property name="stageDesc" type="java.lang.String">
				<column name="stage_desc" length="100" />
			</property>
			<property name="chance" type="java.math.BigDecimal">
				<column name="chance" precision="10" scale="2" />
			</property>
		</component>
		<set name="trackingHistories" inverse="true">
			<key>
				<column name="sales_id" />
			</key>
			<one-to-many
				class="net.ziroom.crm.entity.sales.TrackingHistory" />
		</set>
		<!-- 潜在，意向房源 -->
		<subclass name="net.ziroom.crm.entity.sales.HouseSales"
			discriminator-value="00003" lazy="true">
			<!-- 业主 -->
			<many-to-one name="proprietor"
				class="net.ziroom.crm.entity.customer.Proprietor" fetch="select" lazy="proxy">
				<column name="cust_id" />
			</many-to-one>
			<!-- 房屋 -->
			<many-to-one name="house"
				class="net.ziroom.crm.entity.house.House" fetch="select" lazy="proxy">
				<column name="house_id" />
			</many-to-one>
			<!-- 出租房屋 -->
			<one-to-one name="hireAsks" class="net.ziroom.crm.entity.sales.HireAsks" cascade="all" property-ref="houseSales"/>
		</subclass>
		<!-- 潜在，意向租客 -->
		<subclass name="net.ziroom.crm.entity.sales.TenantSales"
			discriminator-value="00004" lazy="true">
			<!-- 租客 -->
			<many-to-one name="tenant"
				class="net.ziroom.crm.entity.customer.Tenant" fetch="select" lazy="proxy">
				<column name="cust_id" />
			</many-to-one>
			<!-- 租客需求 -->
			<one-to-one name="leasedAsks" class="net.ziroom.crm.entity.sales.LeasedAsks" cascade="all" property-ref="tenantSales"/>
		</subclass>
	</class>
</hibernate-mapping>